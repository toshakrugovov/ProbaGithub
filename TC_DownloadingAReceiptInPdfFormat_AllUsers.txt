TC_DownloadingAReceiptInPdfFormat_AllUsers	Приоритет теста	Название тестирования	Резюме испытания	Шаги тестирования	Данные тестирования	Ожидаемый результат	Фактический результат	Предпосылки	Постусловия	Статус (Pass/Fail)
1	Высокий	Проверка функции скачивания чека в формате PDF	при входе перед пользователем открывается главное окно, после нажатия на кнопку "Профиль" пользователя переносит на страницу профиля. Пользователь переходит в раздел "Мои чеки", просматривает список чеков, выбирает чек, нажимает кнопку "Скачать PDF". Система генерирует PDF-файл через reportlab с данными: информация о компании (название, ИНН, адрес), номер чека, дата и время, список товаров с названиями, размерами, количеством, ценами, суммами по каждому товару, сумма товаров, доставка, скидка (если применён промокод), НДС, итоговая сумма, способ оплаты, информация о ККТ (РН, ЗН, ФН), ссылка на сайт ФНС. Файл PDF успешно скачивается с правильным именем (receipt_1.pdf), открывается в браузере или PDF-ридере, все данные корректны и читаемы. Сайт вывел уведомление об успешном скачивании чека.
	•	Запустить браузер с открытым ресурсом;
•	Проверить наличие открытой главной страницы;
•	Нажать на кнопку "Профиль";
•	Перейти в раздел "Мои чеки";
•	Просмотреть список чеков;
•	Выбрать чек из списка;
•	Нажать кнопку "Скачать PDF";
•	Дождаться скачивания файла;
•	Проверить имя файла (receipt_1.pdf);
•	Открыть файл PDF;
•	Проверить содержимое чека: данные компании, номер чека, дату, товары, суммы, НДС, способ оплаты;	Чек ID: 1;
Номер чека: 1;
Дата: 15.12.2024;
Время: 14:30;
Компания: ООО «MPTCOURSE», ИНН: 7700000000;
Товары: Футболка "MPTCOURSE", размер M, количество 1, цена 2000 ₽;
Доставка: 1000 ₽;
НДС 20%: 600 ₽;
Итоговая сумма: 3600 ₽;
Способ оплаты: Баланс;
ККТ: РН 0000000000000000, ЗН 1234567890, ФН 0000000000000000	Происходит вывод уведомления об успешном скачивании чека, файл PDF сгенерирован и скачан с правильным именем (receipt_1.pdf), файл открывается в браузере или PDF-ридере, чек содержит все данные: информацию о компании, номер чека, дату и время, список товаров с ценами и количествами, суммы товаров, доставку, НДС, итоговую сумму, способ оплаты, информацию о ККТ, все данные корректны и читаемы, кириллица отображается правильно		у пользователя должен быть аккаунт в информационной системе, установлен веб-браузер и присутствовать соединение с сервером приложения, сервер приложения и база данных должны находиться в работоспособном состоянии.
Пользователь авторизован в системе.
В базе данных существует заказ пользователя с ID = 1 и связанный чек с ID = 1.
В системе установлена библиотека reportlab для генерации PDF.
Пользователь находится на странице "Мои чеки"	Чек успешно скачан в формате PDF с правильным именем файла, файл открывается корректно, все данные в чеке совпадают с данными заказа, кириллица отображается правильно, пользователь может сохранить или распечатать чек	
2	Высокий	Проверка скачивания PDF чека с несколькими товарами	при скачивании чека с несколькими товарами система должна корректно отобразить все товары в PDF		Чек ID: 1;
Товары: Футболка "MPTCOURSE", размер M, количество 1, цена 2000 ₽; Джинсы "MPTCOURSE", размер 32, количество 1, цена 3000 ₽;
Итоговая сумма: 7200 ₽	Происходит вывод уведомления об успешном скачивании чека		у пользователя должен быть аккаунт в информационной системе, установлен веб-браузер и присутствовать соединение с сервером приложения, сервер приложения и база данных должны находиться в работоспособном состоянии.
Пользователь авторизован в системе.
В базе данных существует заказ с несколькими товарами и связанный чек.
В системе установлена библиотека reportlab.
Пользователь находится на странице просмотра чека	В PDF чеке отображаются все товары с их названиями, размерами, количествами, ценами, суммами по каждому товару, корректно рассчитана итоговая сумма, все товары помещаются на страницу	
3	Высокий	Проверка скачивания PDF чека с применённым промокодом	при скачивании чека с применённым промокодом система должна отобразить информацию о промокоде и скидке в PDF		Чек ID: 1;
Промокод: SALE20;
Скидка: 400 ₽;
Итоговая сумма до скидки: 3600 ₽;
Итоговая сумма после скидки: 3200 ₽	Происходит вывод уведомления об успешном скачивании чека		у пользователя должен быть аккаунт в информационной системе, установлен веб-браузер и присутствовать соединение с сервером приложения, сервер приложения и база данных должны находиться в работоспособном состоянии.
Пользователь авторизован в системе.
В базе данных существует заказ с применённым промокодом "SALE20" и связанный чек.
В системе установлена библиотека reportlab.
Пользователь находится на странице просмотра чека	В PDF чеке отображается информация о промокоде "SALE20", сумма скидки 400 ₽, итоговая сумма пересчитана с учётом скидки (3200 ₽), все расчёты корректны	
4	Высокий	Проверка скачивания PDF чека с разными способами оплаты	при скачивании чека система должна корректно отобразить способ оплаты в PDF		Чек ID: 1;
Способ оплаты: Банковская карта	Происходит вывод уведомления об успешном скачивании чека		у пользователя должен быть аккаунт в информационной системе, установлен веб-браузер и присутствовать соединение с сервером приложения, сервер приложения и база данных должны находиться в работоспособном состоянии.
Пользователь авторизован в системе.
В базе данных существует заказ с оплатой картой и связанный чек.
В системе установлена библиотека reportlab.
Пользователь находится на странице просмотра чека	В PDF чеке отображается правильный способ оплаты "Банковская карта", информация о способе оплаты корректна	
5	Высокий	Проверка скачивания PDF чека неавторизованным пользователем	при попытке скачать PDF чек неавторизованным пользователем система должна перенаправить на страницу входа		Пользователь не авторизован;
Попытка скачать чек по URL /profile/receipts/1/pdf/	Происходит вывод уведомления об успешном скачивании чека		у пользователя должен быть аккаунт в информационной системе, установлен веб-браузер и присутствовать соединение с сервером приложения, сервер приложения и база данных должны находиться в работоспособном состоянии.
Пользователь не авторизован в системе.
Пользователь пытается скачать чек по прямой ссылке	Пользователь перенаправлен на страницу входа, доступ к скачиванию чека запрещён	
6	Высокий	Проверка скачивания PDF чека другого пользователя	при попытке скачать чек другого пользователя система должна вывести ошибку доступа		Чек ID: 5 (принадлежит другому пользователю)	Происходит вывод уведомления об успешном скачивании чека		у пользователя должен быть аккаунт в информационной системе, установлен веб-браузер и присутствовать соединение с сервером приложения, сервер приложения и база данных должны находиться в работоспособном состоянии.
Пользователь авторизован в системе.
В базе данных существует чек с ID = 5, принадлежащий другому пользователю.
В системе установлена библиотека reportlab.
Пользователь пытается скачать чек с ID = 5	Пользователь получает ошибку 404 "Чек не найден" (из-за проверки user=request.user), PDF не генерируется	
7	Высокий	Проверка скачивания PDF чека с несуществующим ID	при попытке скачать чек с несуществующим ID система должна вывести ошибку		Чек ID: 99999 (не существует)	Происходит вывод уведомления об успешном скачивании чека		у пользователя должен быть аккаунт в информационной системе, установлен веб-браузер и присутствовать соединение с сервером приложения, сервер приложения и база данных должны находиться в работоспособном состоянии.
Пользователь авторизован в системе.
В базе данных не существует чека с ID = 99999.
В системе установлена библиотека reportlab.
Пользователь пытается скачать чек по несуществующему ID	Пользователь получает ошибку 404 "Чек не найден", PDF не генерируется	
8	Высокий	Проверка скачивания PDF чека при отсутствии библиотеки reportlab	при попытке скачать PDF чек при отсутствии библиотеки reportlab система должна вывести ошибку или использовать fallback		Чек ID: 1;
Библиотека reportlab: не установлена	Происходит вывод уведомления об успешном скачивании чека		у пользователя должен быть аккаунт в информационной системе, установлен веб-браузер и присутствовать соединение с сервером приложения, сервер приложения и база данных должны находиться в работоспособном состоянии.
Пользователь авторизован в системе.
В базе данных существует чек с ID = 1.
Библиотека reportlab не установлена в системе.
Пользователь находится на странице просмотра чека	Пользователь получает сообщение об ошибке "PDF генератор не установлен" или система использует HTML fallback для отображения чека	

